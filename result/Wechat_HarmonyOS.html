
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>æ•°æ®æµå¯è§†åŒ–</title>
<script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
<style>
body {
  margin: 0;
  display: flex;
  font-family: monospace;
}
#network {
  width: 60%;
  height: 100vh;
  border-right: 1px solid #ccc;
}
#detail {
  width: 40%;
  padding: 12px;
  overflow: auto;
}
pre {
  background: #f7f7f7;
  padding: 10px;
  white-space: pre-wrap;
}
</style>
</head>
<body>

<div id="network"></div>
<div id="detail">
  <h2>èŠ‚ç‚¹è¯¦æƒ…</h2>
  <div id="info">ç‚¹å‡»å·¦ä¾§èŠ‚ç‚¹æŸ¥çœ‹æºç </div>
</div>

<script>
const nodes = new vis.DataSet([{"id": 0, "label": "PhotoPickerUtils.openGallery(", "file": "data/Wechat_HarmonyOS/entry/src/main/ets/pages/mine/Mine.ets", "line": 22, "desc": "èµ·ç‚¹ - è°ƒç”¨PhotoPickerUtils.openGalleryå‡½æ•°", "context": "   17: .width(70)\n   18: .height(70)\n   19: .margin({ left: 25, right: 10 })\n   20: .borderRadius(8)\n   21: .onClick(() =&gt; {\nğŸ‘‰ 22: PhotoPickerUtils.openGallery(\n   23: uri =&gt; {\n   24: this.imgPath = uri;\n   25: }, errMsg =&gt; {\n   26: Toast.show(errMsg)\n   27: })"}, {"id": 1, "label": "const uri = res.photoUris[0]", "file": "data/Wechat_HarmonyOS/entry/src/main/ets/utils/PhotoPickerUtils.ets", "line": 51, "desc": "ä»ç…§ç‰‡é€‰æ‹©å™¨è¿”å›çš„ç»“æœä¸­è·å–ç¬¬ä¸€ä¸ªURI", "context": "   46: .then(async res =&gt; {\n   47: if (res.photoUris.length &lt; 1) {\n   48: onFailed(&quot;ç”¨æˆ·å–æ¶ˆ&quot;)\n   49: return\n   50: }\nğŸ‘‰ 51: const uri = res.photoUris[0]\n   52: const newFile = await PhotoPickerUtils.copyFileToCache(uri)\n   53: if (newFile.length &lt; 1) {\n   54: onFailed(&quot;å›¾ç‰‡è·å–å¤±è´¥&quot;)\n   55: res\n   56: }"}, {"id": 2, "label": "const newFile = await PhotoPickerUtils.copyFileToCache(uri)", "file": "data/Wechat_HarmonyOS/entry/src/main/ets/utils/PhotoPickerUtils.ets", "line": 52, "desc": "å°†è·å–åˆ°çš„URIæ–‡ä»¶å¤åˆ¶åˆ°åº”ç”¨ç¼“å­˜ç›®å½•ï¼Œè¿”å›æ–°çš„æ–‡ä»¶è·¯å¾„", "context": "   47: if (res.photoUris.length &lt; 1) {\n   48: onFailed(&quot;ç”¨æˆ·å–æ¶ˆ&quot;)\n   49: return\n   50: }\n   51: const uri = res.photoUris[0]\nğŸ‘‰ 52: const newFile = await PhotoPickerUtils.copyFileToCache(uri)\n   53: if (newFile.length &lt; 1) {\n   54: onFailed(&quot;å›¾ç‰‡è·å–å¤±è´¥&quot;)\n   55: res\n   56: }\n   57: onSuccess(newFile)"}, {"id": 3, "label": "onSuccess(newFile)", "file": "data/Wechat_HarmonyOS/entry/src/main/ets/utils/PhotoPickerUtils.ets", "line": 57, "desc": "è°ƒç”¨æˆåŠŸå›è°ƒå‡½æ•°ï¼Œä¼ å…¥å¤åˆ¶åˆ°ç¼“å­˜çš„æ–°æ–‡ä»¶è·¯å¾„", "context": "   52: const newFile = await PhotoPickerUtils.copyFileToCache(uri)\n   53: if (newFile.length &lt; 1) {\n   54: onFailed(&quot;å›¾ç‰‡è·å–å¤±è´¥&quot;)\n   55: res\n   56: }\nğŸ‘‰ 57: onSuccess(newFile)\n   58: })\n   59: .catch((err: BusinessError) =&gt; {\n   60: onFailed(err.message)\n   61: console.error(&#x27;PhotoViewPicker.select failed with err: &#x27; + JSON.stringify(err))\n   62: })"}, {"id": 4, "label": "this.imgPath = uri;", "file": "data/Wechat_HarmonyOS/entry/src/main/ets/pages/mine/Mine.ets", "line": 24, "desc": "å°†ä»PhotoPickerUtils.openGalleryå›è°ƒè¿”å›çš„urièµ‹å€¼ç»™this.imgPathå˜é‡", "context": "   19: .margin({ left: 25, right: 10 })\n   20: .borderRadius(8)\n   21: .onClick(() =&gt; {\n   22: PhotoPickerUtils.openGallery(\n   23: uri =&gt; {\nğŸ‘‰ 24: this.imgPath = uri;\n   25: }, errMsg =&gt; {\n   26: Toast.show(errMsg)\n   27: })\n   28: })\n   29: "}]);
const edges = new vis.DataSet([{"from": 0, "to": 1, "arrows": "to"}, {"from": 1, "to": 2, "arrows": "to"}, {"from": 2, "to": 3, "arrows": "to"}, {"from": 3, "to": 4, "arrows": "to"}]);

const options = {
  interaction: { hover: true },
  physics: { enabled: true },
  edges: {
    arrows: {
      to: { enabled: true, scaleFactor: 1 }
    },
    smooth: {
      type: "cubicBezier"
    }
  }
};

const network = new vis.Network(
  document.getElementById("network"),
  { nodes, edges },
  options
);

network.on("click", function (params) {
  if (!params.nodes.length) return;
  const node = nodes.get(params.nodes[0]);

  document.getElementById("info").innerHTML = `
    <p><b>æ–‡ä»¶ï¼š</b>${node.file}</p>
    <p><b>è¡Œå·ï¼š</b>${node.line}</p>
    <p><b>æè¿°ï¼š</b>${node.desc}</p>
    <h3>ä»£ç ä¸Šä¸‹æ–‡</h3>
    <pre>${node.context}</pre>
  `;
});
</script>

</body>
</html>
